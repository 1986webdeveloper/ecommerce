{% extends 'base.html' %}
{% load static  %}
{% block title %}Product List{% endblock %}
{% block content %}
<div class="content-wrapper">
  <div class="container-fluid">
      <!-- Breadcrumbs-->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="#">Products</a>
        </li>
        <li class="breadcrumb-item active">Product dashboard</li>
      </ol>
      {% if message %}
        {{message}}
      {% endif %}

      <div class="card mb-3">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered infinite-container" id="dataTable" width="100%" cellspacing="0">
              <thead>
                <tr>
                  <th>Index</th>
                  <th>Product Name</th>
                  <th>Description</th>
                  <th>Category</th>
                  <th>Brand</th>
                  <th>Color</th>
                  <th>Price</th>
                  <th>Type</th>
                </tr>
              </thead>
              <tbody>
                {% for data in page_obj %}
                <tr class="infinite-item">
                    <td>{{ page_obj.start_index|add:forloop.counter0 }}</td>
                    <td>{{data.name}}</td>
                    <td>{{data.description}}</td>
                    <td>{{data.category}}</td>
                    <td>{{data.brand}}</td>
                    <td>{{data.color}}</td>
                    <td>{{data.price}}</td>
                    <td>{{data.type}}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
            {% if page_obj.has_next %}
                <div class="loading" style="text-align: center;max-width: available">
                    Cursor Here And Show More Data ...
                </div>
                <a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}"></a>
            {% endif %}
            </div>
          </div>
        </div>
      </div>
</div>
<a class="scroll-to-top rounded" href="#page-top">
  <i class="fa fa-angle-up"></i>
</a>
{% endblock %}
{% block extra_js %}
<script type="text/javascript">
  $('.loading').on('mouseover',function () {
      var infinite = new Waypoint.Infinite({
          element: $('.infinite-container')[0],
          onBeforePageLoad: function () {
              $('.loading').show();
          },
          onAfterPageLoad: function ($items) {
              $('.loading').hide();
          }
      });
  })
</script>
{% endblock extra_js %}
